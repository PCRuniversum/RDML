library(shiny)
library(shinythemes)
library(rhandsontable)
library(dplyr)

shinyUI(
  tags$div(
    navbarPage(
      title = "RDMLedit",
      theme = shinytheme("cerulean"),
      tabPanel("Files",
               includeMarkdown("md/files.md"),
               fileInput("rdmlFiles",
                         h4("Upload RDML File:"),
                         multiple = TRUE),
               fileInput("fromTables",
                         h4("Upload .csv Files to Create from File"),
                         multiple = TRUE),
               selectizeInput("rdmlFileSlct",
                              "Show File",
                              choices = "",
                              options= list(
                                create =TRUE
                              )),
               selectInput("mergeRdmlsSlct",
                           "Merge RDMLs",
                           multiple = TRUE,
                           choices = ""),
               actionButton("mergeBtn",
                            "Merge"),
               textInput("dateMadeText", "Date Made",
                         ""),
               textInput("dateUpdatedText", "Date Updated",
                         ""),
               actionButton("removeRDMLBtn",
                            "Remove RDML"),
               actionButton("updateRDMLBtn",
                            "Update"),
               downloadLink("downloadRDML", "Download RDML"),
               plotOutput("dendroRDMLplot")),
      navbarMenu("Metadata",
                 tabPanel("ID",
                          selectizeInput("idSlct",
                                         "Select ID",
                                         choices = "",
                                         options= list(
                                           create =TRUE
                                         )),
                          textInput("idPublisherText", "Publisher",
                                    ""),
                          textInput("idSerialNumberText", "Serial Number",
                                    ""),
                          textInput("idMD5HashText", "MD5 Hash",
                                    ""),
                          actionButton("removeIDBtn",
                                       "Remove ID")),
                 tabPanel("Experimenter",
                          selectizeInput("experimenterSlct",
                                         "Select Experiment",
                                         choices = "",
                                         options= list(
                                           create =TRUE
                                         )),
                          
                          textInput("experimenterIdText", "ID",
                                    ""),
                          textInput("experimenterFirstNameText", "First Name",
                                    ""),
                          textInput("experimenterLastNameText", "Last Name",
                                    ""),
                          textInput("experimenterEmailText", "Email",
                                    ""),
                          textInput("experimenterLabNameText", "Lab Name",
                                    ""),
                          textInput("experimenterLabAdressText", "Lab Address",
                                    ""),
                          actionButton("removeExperimenterBtn",
                                       "Remove Experimenter")),
                 tabPanel("Documentation",
                          selectizeInput("documentationSlct",
                                         "Select Documentation",
                                         choices = "",
                                         options= list(
                                           create =TRUE
                                         )),
                          textInput("documentationIdText", "ID",
                                    ""),
                          textInput("documentationTextText", "Text",
                                    ""),
                          actionButton("removeDocumentationBtn",
                                       "Remove Documentation")),
                 tabPanel("Dye",
                          selectizeInput("dyeSlct",
                                         "Select Dye",
                                         choices = "",
                                         options= list(
                                           create =TRUE
                                         )),
                          #                           uiOutput("dyeSlct"),
                          #                           uiOutput("dyeTabWell"),
                          textInput("dyeIdText", "ID",
                                    ""),
                          textInput("dyeDescriptionText", "Text",
                                    ""),
                          actionButton("removeDyeBtn",
                                       "Remove Dye")
                          
                 ),
                 tabPanel("Sample",
                          selectizeInput("sampleSlct",
                                         "Select Sample",
                                         choices = "",
                                         options= list(
                                           create =TRUE
                                         )),
                          textInput("sampleIdText", "ID",
                                    ""),
                          textInput("sampleDescriptionText", 
                                    "Description",
                                    ""),
                          selectInput("sampleDocumentationSlct",
                                      "Documentation",
                                      multiple = TRUE,
                                      choices = ""),
                          wellPanel(selectizeInput("samplexRefSlct",
                                                   "Select xRef",
                                                   choices = "",
                                                   options= list(
                                                     create =TRUE
                                                   )),
                                    textInput("samplexRefNameText", 
                                              "xRef Name",
                                              ""),
                                    textInput("samplexRefIdText", 
                                              "xRef ID",
                                              ""),
                                    actionButton("removeSamplexRefBtn",
                                                 "Remove xRef")),
                          wellPanel(selectizeInput("sampleAnnotationSlct",
                                                   "Select Annotation",
                                                   choices = "",
                                                   options= list(
                                                     create =TRUE
                                                   )),
                                    textInput("sampleAnnotationPropertyText", 
                                              "Annotation Property",
                                              ""),
                                    textInput("sampleAnnotationValueText", 
                                              "Annotation Value",
                                              ""),
                                    actionButton("removeSampleAnnotationBtn",
                                                 "Remove Annotation")),
                          selectInput("sampleTypeSlct",
                                      "Type",
                                      choices = c("unkn", "nac",
                                                  "std", "ntp",
                                                  "nrt", "pos",
                                                  "opt")),
                          checkboxInput("sampleInterRunCalibratorChk",
                                        "Inter Run Calibrator",
                                        FALSE),
                          wellPanel("Quantity",
                                    textInput("sampleQuantityValueText", 
                                              "Value",
                                              ""),
                                    selectInput("sampleQuantityUnitSlct",
                                                "Unit",
                                                choices = c("other",
                                                            "cop", "fold",
                                                            "dil", "ng",
                                                            "nMol"))
                          ),
                          checkboxInput("sampleCalibrationSampleChk",
                                        "Calibartion Sample",
                                        FALSE),
                          wellPanel("cDNA Synthesis Method",
                                    textInput("sampleCsmEnzymeText", 
                                              "Enzyme",
                                              ""),
                                    selectInput("sampleCsmPrimingMethodSlct",
                                                "Priming Method",
                                                choices = c("",
                                                            "oligo-dt", "random",
                                                            "target-specific",
                                                            "oligo-dt and random",
                                                            "other")),
                                    checkboxInput("sampleCsmDnaseTreatmentChk",
                                                  "DNAase Treatment",
                                                  FALSE),
                                    selectInput("sampleCsmTccSlct",
                                                "Thermal Cycling Conditions",
                                                choices = "")
                          ),
                          wellPanel("Template Quantity",
                                    textInput("sampleTemplateQuantityConcText", 
                                              "Concentration",
                                              ""),
                                    selectInput("sampleTemplateQuantityNucleotideSlct",
                                                "Nucleotide",
                                                choices = c("",
                                                            "DNA",
                                                            "genomic DNA",
                                                            "cDNA",
                                                            "RNA"))
                          ),
                          actionButton("removeSampleBtn",
                                       "Remove Sample")),
                 tabPanel("Target",
                          selectizeInput("targetSlct",
                                         "Select Target",
                                         choices = "",
                                         options= list(
                                           create =TRUE
                                         )),
                          textInput("targetIdText", "ID",
                                    ""),
                          textInput("targetDescriptionText", 
                                    "Description",
                                    ""),
                          selectInput("targetDocumentationSlct",
                                      "Documentation",
                                      multiple = TRUE,
                                      choices = ""),
                          wellPanel(selectizeInput("targetxRefSlct",
                                                   "Select xRef",
                                                   choices = "",
                                                   options= list(
                                                     create =TRUE
                                                   )),
                                    textInput("targetxRefNameText", 
                                              "xRef Name",
                                              ""),
                                    textInput("targetxRefIdText", 
                                              "xRef ID",
                                              ""),
                                    actionButton("removetargetxRefBtn",
                                                 "Remove xRef")),
                          selectInput("targetTypeSlct",
                                      "Type",
                                      choices = c("toi",
                                                  "ref")),
                          textInput("targetAemText", 
                                    "Amplification Efficiency Method",
                                    ""),
                          textInput("targetAeText", 
                                    "Amplification Efficiency",
                                    ""),
                          textInput("targetAeSeText", 
                                    "Amplification Efficiency SE",
                                    ""),
                          textInput("targetDetectionLimitText", 
                                    "Detection Limit",
                                    ""),
                          selectInput("targetDyeIdSlct",
                                      "Dye ID",
                                      choices = ""),
                          wellPanel("Sequences",
                                    selectInput("targetSequencesTypeSlct",
                                                "Oligo Type",
                                                choices = c("forwardPrimer",
                                                            "reversePrimer",
                                                            "probe1",
                                                            "probe2",
                                                            "amplicon")),
                                    textInput("targetSequences3PrimeTagText", 
                                              "Tree Prime Tag",
                                              ""),
                                    textInput("targetSequences5PrimeTagText", 
                                              "Five Prime Tag",
                                              ""),
                                    textInput("targetSequencesSequenceText", 
                                              "Sequence",
                                              "")),
                          wellPanel("Commercial Assay",
                                    textInput("targetCaCompanyText", 
                                              "Company",
                                              ""),
                                    textInput("targetCaOrderNumberText", 
                                              "Order Number",
                                              "")),
                          actionButton("removeTargetBtn",
                                       "Remove target")),
                 tabPanel("Thermal Cycling Conditions",
                          selectizeInput("tccSlct",
                                         "Select Thermal Cycling Conditions",
                                         choices = "",
                                         options= list(
                                           create =TRUE
                                         )),
                          textInput("tccIdText", "ID",
                                    ""),
                          textInput("tccDescriptionText", 
                                    "Description",
                                    ""),
                          selectInput("tccDocumentationSlct",
                                      "Documentation",
                                      multiple = TRUE,
                                      choices = ""),
                          textInput("tccLidTemperatureText", 
                                    "Lid Temperature",
                                    ""),
                          selectInput("tccExperimenterSlct",
                                      "Experimenter",
                                      multiple = TRUE,
                                      choices = ""),
                          wellPanel(selectizeInput("tccStepSlct",
                                                   "Select Step",
                                                   choices = "",
                                                   options= list(
                                                     create =TRUE
                                                   )),
                                    textInput("tccStepNrText", "Step Number",
                                              ""),
                                    textInput("tccStepDescriptionText", 
                                              "Description",
                                              ""),
                                    wellPanel(
                                    selectInput("tccStepTypeSlct",
                                                "Step Type",
                                                choices = c("temperature",
                                                            "gradient",
                                                            "loop",
                                                            "pause",
                                                            "lidOpen")),
                                    conditionalPanel(
                                      "input.tccStepTypeSlct == 'gradient'",
                                      textInput("tccStepHighTemperatureText", 
                                                "High Temperature",
                                                ""),
                                      textInput("tccStepLowTemperatureText", 
                                                "Low Temperature",
                                                "")),
                                    conditionalPanel(
                                      "input.tccStepTypeSlct == 'temperature' || input.tccStepTypeSlct == 'pause'",
                                      textInput("tccStepTemperatureText", 
                                                "Temperature",
                                                "")),
                                    conditionalPanel(
                                      "input.tccStepTypeSlct == 'temperature' || input.tccStepTypeSlct == 'gradient'",
                                      textInput("tccStepDurationText", 
                                                "Duration",
                                                ""),
                                      textInput("tccStepTemperatureChangeText", 
                                                "Temperature Change",
                                                ""),
                                      textInput("tccStepDurationChangeText", 
                                                "Duration Change",
                                                ""),
                                      selectInput("tccStepMeasureText", 
                                                  "Measure",
                                                  choices = c("real time",
                                                              "meltcurve")),
                                      textInput("tccStepRampText", 
                                                "Ramp",
                                                "")),
                                    conditionalPanel(
                                      "input.tccStepTypeSlct == 'loop'",
                                      textInput("tccStepGotoText", 
                                                "Go To",
                                                ""),
                                      textInput("tccStepRepeatText", 
                                                "Repeat",
                                                "")),
                                    conditionalPanel(
                                      "input.tccStepTypeSlct == 'lidOpen'",
                                      checkboxInput("tccStepLidOpenChk", 
                                                    "Lid Open",
                                                    FALSE)
                                    ),
                                    actionButton("removeTccStepBtn",
                                                 "Remove Step")
                          )),
                          actionButton("removeTccBtn",
                                       "Remove Thermal Cycling Conditions"))),
      tabPanel("Fluorescence Points")
    ),
    uiOutput("logText")
  )
)
